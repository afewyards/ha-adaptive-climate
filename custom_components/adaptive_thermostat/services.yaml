reset_pid_to_physics:
  name: Reset PID to Physics Defaults
  description: >-
    Recalculates PID values from the zone's physical properties (area_m2,
    ceiling_height, heating_type) using physics-based initialization. Also
    clears the integral term to avoid wind-up from previous tuning.
    Requires debug: true in domain configuration.
  target:
    entity:
      integration: adaptive_thermostat
      domain: climate

apply_adaptive_pid:
  name: Apply Adaptive PID
  description: >-
    Calculates and applies PID values based on learned performance metrics
    (overshoot, undershoot, settling time, oscillations). Requires at least
    3 analyzed heating cycles. Also clears the integral term to avoid
    wind-up from previous tuning.
    Requires debug: true in domain configuration.
  target:
    entity:
      integration: adaptive_thermostat
      domain: climate

apply_adaptive_ke:
  name: Apply Adaptive Ke
  description: >-
    Applies learned outdoor temperature compensation (Ke) adjustments based
    on observed correlations between outdoor temperature and heating demand.
    Requires debug: true in domain configuration.
  target:
    entity:
      integration: adaptive_thermostat
      domain: climate

rollback_pid:
  name: Rollback PID
  description: >-
    Rolls back to the previous PID configuration, clears validation history,
    and exits validation mode. Use this if newly applied PID values are
    performing worse than the previous configuration.
    Requires debug: true in domain configuration.
  target:
    entity:
      integration: adaptive_thermostat
      domain: climate

delete_pid_history:
  name: Delete PID History
  description: Delete specific entries from PID history for the zone.
  target:
    entity:
      integration: adaptive_thermostat
      domain: climate
  fields:
    indices:
      name: Indices
      description: List of indices to delete (0-based, 0 = oldest entry)
      required: true
      example: [0, 1]
      selector:
        object:
    mode:
      name: Mode
      description: Which mode's history to modify
      required: false
      default: heat
      selector:
        select:
          options:
            - heat
            - cool

restore_pid_history:
  name: Restore PID History
  description: Restore PID gains from a specific history entry.
  target:
    entity:
      integration: adaptive_thermostat
      domain: climate
  fields:
    index:
      name: Index
      description: History index to restore from (0-based, 0 = oldest entry)
      required: true
      example: 0
      selector:
        number:
          min: 0
          max: 9
          mode: box
    mode:
      name: Mode
      description: Which mode's history to restore from
      required: false
      default: heat
      selector:
        select:
          options:
            - heat
            - cool

clear_learning:
  name: Clear Learning
  description: >-
    Clears all adaptive learning data for the zone and resets PID to physics
    defaults. Use this to start fresh if learned values are not working well.
    Clears cycle history, Ke observations, and resets PID gains.
    Requires debug: true in domain configuration.
  target:
    entity:
      integration: adaptive_thermostat
      domain: climate

# Domain-level services for system-wide operations
run_learning:
  name: Run Learning
  description: >-
    Trigger adaptive learning analysis for all zones. Analyzes heating cycles
    and calculates recommended PID adjustments based on observed performance
    metrics (overshoot, undershoot, settling time, oscillations). Results are
    returned and also logged for review.
    Requires debug: true in domain configuration.

pid_recommendations:
  name: PID Recommendations
  description: >-
    Returns current and recommended PID values for all zones based on physics
    and adaptive learning. This is a read-only service - it does not apply
    any changes. Use this to preview what apply_adaptive_pid would do.
    Requires debug: true in domain configuration.

weekly_report:
  name: Weekly Report
  description: Generate and send a weekly performance report via the configured notification service. Includes duty cycles, energy usage, and zone statistics.

cost_report:
  name: Cost Report
  description: Generate an energy cost report showing consumption and costs for each zone and the total system.
  fields:
    period:
      name: Period
      description: The reporting period (daily, weekly, or monthly)
      required: false
      default: weekly
      example: weekly
      selector:
        select:
          options:
            - daily
            - weekly
            - monthly

set_vacation_mode:
  name: Set Vacation Mode
  description: Enable or disable vacation mode. When enabled, all zones are set to frost protection temperature and learning is paused.
  fields:
    enabled:
      name: Enabled
      description: Whether to enable or disable vacation mode
      required: true
      example: true
      selector:
        boolean:
    target_temp:
      name: Target Temperature
      description: The frost protection temperature to use during vacation (default 12°C)
      required: false
      default: 12
      example: 12
      selector:
        number:
          min: 5
          max: 18
          step: 0.5
          unit_of_measurement: "°C"
          mode: slider
